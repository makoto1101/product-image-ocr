/* --- Google Fontsの読み込み --- */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');

/* --- 全体のスタイル --- */
body {
    font-family: 'Noto Sans JP', sans-serif;
    color: #333;
}

/* --- メインコンテンツエリアの調整 --- */
.main .block-container {
    padding-top: 3rem;
}

/* --- サイドバーのスタイル --- */
.st-emotion-cache-16txtl3 {
    background-color: #f8f9fa;
    padding: 1.5rem;
}

.st-emotion-cache-16txtl3 h1,
.st-emotion-cache-16txtl3 h2,
.st-emotion-cache-16txtl3 h3 {
    color: #0d6efd;
}

/* --- カードデザイン --- */
.st-emotion-cache-16txtl3 .st-emotion-cache-1r4qj8v {
    background-color: #ffffff;
    border: 1px solid #dee2e6;
    border-radius: 12px;
    padding: 1.2rem;
    margin-bottom: 1.5rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

/* --- ボタンの立体デザイン (デフォルト: 青) --- */
.stButton > button {
    border: none;
    border-radius: 8px;
    padding: 5px 10px;
    font-weight: 700;
    color: white;
    background: linear-gradient(145deg, #5c87c9, #1c3457);
    box-shadow: 4px 4px 10px #cccccc, -4px -4px 10px #ffffff;
    transition: all 0.2s ease-in-out;
}

/* --- プライマリボタン (緑) --- */
.stButton > button.st-emotion-cache-19rxjzo {
    background: linear-gradient(145deg, #198754, #146c43);
}

.stButton > button:hover {
    opacity: 0.9;
    box-shadow: 2px 2px 5px #bbbbbb, -2px -2px 5px #ffffff;
}

/* デフォルトボタン (青) の active */
.stButton > button:active {
    box-shadow: inset 4px 4px 8px #19355e, inset -4px -4px 8px #2c609c;
}

/* プライマリボタン (緑) の active */
.stButton > button.st-emotion-cache-19rxjzo:active {
    background: linear-gradient(145deg, #146c43, #198754);
    box-shadow: inset 4px 4px 8px #105535, inset -4px -4px 8px #22b973;
}

.stButton > button:disabled {
    background: #e9ecef;
    color: #adb5bd;
    border: 1px solid #ced4da;
    box-shadow: none;
}

/* --- テキスト入力欄 --- */
.stTextInput input {
    border-radius: 8px;
    border: 1px solid #ced4da;
    padding: 10px;
    transition: border-color 0.2s, box-shadow 0.2s;
}

.stTextInput input:focus {
    border-color: #86b7fe;
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}

/* --- サイドバーの幅を広げる --- */
[data-testid="stSidebar"] {
    width: 550px !important;
}

/* --- サイドバー内 キャンセルボタン（グレー）--- */
[data-testid="stSidebar"] div[data-testid="stHorizontalBlock"] > div:nth-child(2) .stButton > button {
    background: linear-gradient(145deg, #868e96, #6c757d);
    box-shadow: 4px 4px 10px #cccccc, -4px -4px 10px #ffffff;
}

[data-testid="stSidebar"] div[data-testid="stHorizontalBlock"] > div:nth-child(2) .stButton > button:active {
    box-shadow: inset 4px 4px 8px #5a6268, inset -4px -4px 8px #9098a0;
}

/* --- プログレスバーのスタイル --- */
[data-testid="stProgressBar"] > div > div {
    background-color: #28a745 !important; /* 緑色 */
    height: 10px !important;
    border-radius: 5px !important;
}

[data-testid="stProgressBar"] > div {
    border-radius: 5px !important;
}

/* --- Excel保存ボタン (緑) --- */
a.download-button-excel {
    display: inline-block;
    width: 100%;
    box-sizing: border-box;
    border: none !important;
    border-radius: 8px !important;
    padding: 8px 6px !important;
    font-weight: 400 !important;
    color: white !important;
    text-decoration: none !important;
    text-align: center;
    background: linear-gradient(145deg, #5c87c9, #1c3457) !important;
    box-shadow: 4px 4px 10px #cccccc, -4px -4px 10px #ffffff !important;
    transition: all 0.2s ease-in-out !important;
}

a.download-button-excel:hover {
    opacity: 0.9 !important;
    box-shadow: 2px 2px 5px #bbbbbb, -2px -2px 5px #ffffff !important;
    color: white !important;
}

a.download-button-excel:active {
    box-shadow: inset 4px 4px 8px #19355e, inset -4px -4px 8px #2c609c !important;
    color: white !important;
}

[data-testid="stDownloadButton-download_excel_button"] > button {
    background: linear-gradient(145deg, #5adb9f, #146c43) !important;
    color: white !important;
    box-shadow: 4px 4px 10px #cccccc, -4px -4px 10px #ffffff !important;
    border: none !important;
    padding-top: 8px !important;
    padding-bottom: 8px !important;
    font-weight: 400 !important;
}

[data-testid="stDownloadButton-download_excel_button"] > button:hover {
    background: linear-gradient(145deg, #5adb9f, #146c43) !important;
    opacity: 0.9 !important;
    box-shadow: 2px 2px 5px #bbbbbb, -2px -2px 5px #ffffff !important;
    color: white !important;
}

[data-testid="stDownloadButton-download_excel_button"] > button:active {
    background: linear-gradient(145deg, #5adb9f, #146c43) !important;
    box-shadow: inset 4px 4px 8px #105535, inset -4px -4px 8px #22b973 !important;
}

/* ==================================================
   ▼▼▼ テーブル関連のスタイル ▼▼▼
   ================================================== */

/* コンテナ設定 */
.table-container {
    max-height: 75vh;
    overflow: auto;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    border: 1px solid #dee2e6;
}

/* テーブル自体の設定 */
.custom_df {
    width: max-content;
    min-width: 100%;
    border-collapse: separate;  /* stickyヘッダー用 */
    border-spacing: 0;
}

/* --- 全セルの基本設定 --- */
.custom_df th, .custom_df td {
    padding: 8px 10px;
    text-align: left;
    border-bottom: 1px solid #c2c2c2;
    border-right: 1px solid #c2c2c2;
    font-size: 16px;
    vertical-align: middle;
    min-width: 110px;
    max-width: 400px;
    white-space: normal;
    word-break: break-word;
}

/* 左端の枠線 */
.custom_df th:first-child, .custom_df td:first-child {
    border-left: 1px solid #dee2e6;
}

/* リンク設定 */
.custom_df a {
    text-decoration: none;
    color: inherit;
    display: block;
    width: 100%;
    height: 100%;
}

/* ヘッダー固定設定 */
.custom_df th {
    position: sticky;
    top: 0;
    z-index: 2;
    background-color: #f8f9fa;
    border-top: 1px solid #dee2e6;
    border-bottom: 1px solid #b9bec2;
}

/* --- 列ごとの個別調整 --- */

/* 1列目：No（固定幅・狭く） */
.custom_df th:nth-child(1), .custom_df td:nth-child(1) {
    width: 1% !important;
    min-width: 30px !important;
    max-width: 50px !important;
    white-space: nowrap;
    padding: 8px 4px !important;
    text-align: center;
}

/* 2列目：画像名 */
.custom_df th:nth-child(2), .custom_df td:nth-child(2) {
    min-width: 200px;
    max-width: 300px;
}

/* 画像列の設定 (3, 6, 9列目...) */
.custom_df td:nth-child(3n) {
    padding: 0 !important;
    min-width: 100px;
    min-height: 300px;
}

/* OCR列の設定 (4, 7, 10列目...) */
.custom_df th:nth-child(3n+1), .custom_df td:nth-child(3n+1) {
    min-width: 200px;
    max-width: auto;
    white-space: normal;
}

/* 内容量列の設定 (5, 8, 11列目...) */
.custom_df th:nth-child(3n+2), .custom_df td:nth-child(3n+2) {
    min-width: 100px;
    max-width: auto;
    white-space: normal;
}

/* --- 画像自体の設定（通常モード：cover） --- */
.custom_df td img {
    display: block;
    width: 100%;
    min-width: 250px;
    min-height: 250px;
    object-fit: cover;
}

/* --- 列の固定（Noと画像名） --- */

/* 1列目 (No) */
.custom_df th:nth-child(1),
.custom_df td:nth-child(1) {
    position: sticky;
    left: 0;
    z-index: 1;
    width: 50px !important;
    min-width: 50px !important;
    max-width: 50px !important;
    background-color: #ffffff; /* 横スクロール時の透け防止 */
}

/* 2列目 (画像名) */
.custom_df th:nth-child(2),
.custom_df td:nth-child(2) {
    position: sticky;
    left: 50px; /* 1列目の幅分ずらす */
    z-index: 1;
    background-color: #ffffff;
    border-right: 2px solid #dee2e6;
}

/* 固定列ヘッダーのz-index調整 */
.custom_df th:nth-child(1),
.custom_df th:nth-child(2) {
    z-index: 3;
    background-color: #f8f9fa;
}

/* ==================================================
   ▼▼▼ モード別の表示制御 ▼▼▼
   ================================================== */

/* --- 1. 画像モード（テキスト列非表示時） --- */
/* app.pyで「image-mode-only」クラスが付与された時 */
.image-mode-only .custom_df td img {
    object-fit: contain !important;  /* 見切れ防止 */
    height: auto !important;
    max-height: 300px !important;
    background-color: transparent !important; /* 背景透明 */
}

/* --- 2. 全体表示モード（Fit Mode） --- */
/* app.pyで「fit-mode」クラスが付与された時 */

/* 横スクロールを消す */
.fit-mode.table-container {
    overflow-x: hidden !important;
}

/* 表幅を画面に合わせる */
.fit-mode .custom_df {
    width: 100% !important;
    table-layout: fixed !important;
}

/* セル幅を自動調整、文字サイズ縮小 */
.fit-mode .custom_df th, 
.fit-mode .custom_df td {
    min-width: auto !important;
    width: auto !important;
    white-space: normal !important;
    font-size: 14px !important;
}

/* No列だけは最小幅確保 */
.fit-mode .custom_df th:nth-child(1), 
.fit-mode .custom_df td:nth-child(1) {
    width: 30px !important;
    min-width: 30px !important;
}

/* 画像設定：全体表示用に調整 */
.fit-mode .custom_df td img {
    object-fit: contain !important;
    width: 100% !important;
    height: auto !important;
    max-height: 150px !important;
    min-height: auto !important;
    min-width: auto !important;
    background-color: transparent !important;
}

/* --- 全体表示時の列固定解除 --- */
/* ヘッダー：上固定(sticky)は維持、左固定のみ解除 */
.fit-mode .custom_df th:nth-child(1),
.fit-mode .custom_df th:nth-child(2) {
    position: sticky !important;
    top: 0 !important;
    left: auto !important; /* 左固定解除 */
    border-right: 1px solid #c2c2c2 !important;
    z-index: 2 !important;
    background-color: #f8f9fa !important;
}

/* データセル：固定完全解除 */
.fit-mode .custom_df td:nth-child(1),
.fit-mode .custom_df td:nth-child(2) {
    position: static !important;
    border-right: 1px solid #c2c2c2 !important;
    z-index: auto !important;
}

/* ==================================================
   ▼▼▼ その他のUI要素 ▼▼▼
   ================================================== */

/* チェックボックス */
div[data-testid="stCheckbox"] > label > div[data-baseweb="checkbox"] > div[aria-checked="true"] {
    background-color: #0d6efd !important;
    border-color: #0d6efd !important;
}
div[data-testid="stCheckbox"] > label > div[data-baseweb="checkbox"] > div {
    border-color: #0d6efd !important;
}

/* マルチセレクト */
div[data-baseweb="tag"] {
    background-color: #0d6efd !important;
}
div[data-baseweb="tag"] span,
div[data-baseweb="tag"] [aria-label="Remove item"] {
    color: white !important;
}

/* コンテナの影 */
[data-testid="stVerticalBlockBorderWrapper"] {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

/* トースト通知 */
[data-testid="stToast"] {
    background-color: #8de6a2; 
    color: #000000; 
    top: auto !important;
    bottom: 2rem !important;
    right: 2rem !important;
    left: auto !important;
}
[data-testid="stToast"] button {
    color: white;
}

/* ログアウトボタン（グレー） */
[data-testid="stButton-logout_button"] {
    background: linear-gradient(145deg, #868e96, #6c757d) !important;
    color: white !important;
    box-shadow: 4px 4px 10px #cccccc, -4px -4px 10px #ffffff !important;
    border: none !important;
}
[data-testid="stButton-logout_button"]:hover {
    background: linear-gradient(145deg, #868e96, #6c757d) !important;
    opacity: 0.9 !important;
    box-shadow: 2px 2px 5px #bbbbbb, -2px -2px 5px #ffffff !important;
    color: white !important;
}
[data-testid="stButton-logout_button"]:active {
    background: linear-gradient(145deg, #868e96, #6c757d) !important;
    box-shadow: inset 4px 4px 8px #5a6268, inset -4px -4px 8px #9098a0 !important;
}

/* ページネーションボタン（グレー） */
[data-testid="stButton-page_first"],
[data-testid="stButton-page_prev"],
[data-testid="stButton-page_next"],
[data-testid="stButton-page_last"] {
    background: linear-gradient(145deg, #868e96, #6c757d) !important;
    color: white !important;
    box-shadow: 4px 4px 10px #cccccc, -4px -4px 10px #ffffff !important;
    border: none !important;
}
[data-testid="stButton-page_first"]:hover,
[data-testid="stButton-page_prev"]:hover,
[data-testid="stButton-page_next"]:hover,
[data-testid="stButton-page_last"]:hover {
    background: linear-gradient(145deg, #868e96, #6c757d) !important;
    opacity: 0.9 !important;
    box-shadow: 2px 2px 5px #bbbbbb, -2px -2px 5px #ffffff !important;
    color: white !important;
}
[data-testid="stButton-page_first"]:active,
[data-testid="stButton-page_prev"]:active,
[data-testid="stButton-page_next"]:active,
[data-testid="stButton-page_last"]:active {
    background: linear-gradient(145deg, #868e96, #6c757d) !important;
    box-shadow: inset 4px 4px 8px #5a6268, inset -4px -4px 8px #9098a0 !important;
}
[data-testid="stButton-page_first"]:disabled,
[data-testid="stButton-page_prev"]:disabled,
[data-testid="stButton-page_next"]:disabled,
[data-testid="stButton-page_last"]:disabled {
    background: #e9ecef !important;
    color: #adb5bd !important;
    border: 1px solid #ced4da !important;
    box-shadow: none !important;
}

/* 余白調整 */
div.block-container {
    padding-top: 2.5rem;
}

/* ==================================================
   ▼▼▼ ホバー時のハイライト制御 ▼▼▼
   ================================================== */

/* 背景色を上書きするのではなく、
   「box-shadow」を使って「半透明の黒」を内側に重ねることで、
   どんな背景色（白でも赤でも）であっても、その色のまま暗くします。
*/

/* 1. 行にカーソルが乗った時：行全体を「5%暗く」する */
.custom_df tbody tr:hover td {
    /* 背景色は変更せず、薄い黒の影を内側に敷く */
    box-shadow: inset 0 0 0 9999px rgba(0, 0, 0, 0.05) !important;
    transition: box-shadow 0.1s;
}

/* 2. さらに、そのセル自体にカーソルが乗った時：「10%暗く」する */
.custom_df tbody tr:hover td:hover {
    /* 少し濃い黒の影を内側に敷く */
    box-shadow: inset 0 0 0 9999px rgba(0, 0, 0, 0.1) !important;
}

/* --- サイドバー内の st.info (青いボックス) の文字サイズ調整 --- */
[data-testid="stSidebar"] [data-testid="stAlert"] p {
    font-size: 16px !important; /* お好みのサイズに変更してください (デフォルトは16px程度) */
    line-height: 1.2 !important;
}

/* ==================================================
   ▼▼▼ 操作マニュアル ▼▼▼
   ================================================== */
 button[kind="tertiary"] {
    background: none !important;
    border: none !important;
    padding: 0 !important;
    color: #0d6efd !important;
    text-decoration: underline !important;
    cursor: pointer !important;
    box-shadow: none !important;
}
button[kind="tertiary"]:hover {
    color: #0a58ca !important;
    text-decoration: none !important;
}
button[kind="tertiary"]:focus {
    box-shadow: none !important;
    outline: none !important;
}
/* ボタンのコンテナの余白調整 */
div[data-testid="stButton"] {
    display: inline-block;
    margin-top: 5px;
}

[data-testid="stMarkdownContainer"] blockquote {
    color: #000000 !important; /* 文字色を濃いグレー（ほぼ黒）に設定 */
    border-left-color: #ff5664 !important; /* 左側の線を少し濃く */
    background-color: #fff7f8 !important; /* 背景色を薄いグレーにして読みやすく */
}

/* テーブルのスタイル調整 */
/* ヘッダー行の背景色を薄いグレーに */
[data-testid="stMarkdownContainer"] table thead tr th {
    background-color: #f0f2f6 !important;
}
/* 1列目（項目列）の背景色を薄いグレーに */
[data-testid="stMarkdownContainer"] table tbody tr td:first-child {
    background-color: #f0f2f6 !important;
}